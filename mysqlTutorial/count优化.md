## count优化
日常查询特别是后台分页查询经常会使用到count操作，但是count在数据量小的时候还可以，但是当数据量超过百万之后count就是到秒级别了，
再加上后台的查询条件组合形式不同，会导致很多针对sql的优化问题。
这里主要说一下针对大批量数据的count优化：
1. 针对count做缓存，如果查询组合很好，或者就一个查询条件，而且实时性要求不高的可以针对count做缓存。此方式使用情况比较窄
2. 如果有自增主键且数据连续的，其实主键id的最大值就是count的值或者根据主键的起始id和查询时候的最后一条id就可以确定，此时可以使用主键id来处理。此方式也只有局限性而且很可能数据不连续
3. 修改需求，后台只提供上一页，下一页的查询，而且需要控制查询的范围，比如只提供某些时间段或者只提供多少页的查询等

参考：https://www.v2ex.com/t/443491
